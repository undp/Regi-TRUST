# Helm Charts

We are providing helm charts for deploying the NSD based zone manager into a kubernetes cluster. Additionally you can deploy the zone manager UI with the ui helm charts.

## Remarks:
The zonemanager includes the NSD DNS server within the deployment to serve the TRAIN related DNS queries. This means the pods deployed by the charts offer three different ports:

1. port 16001 -> http port for rest api
2. port 53/tcp **and** port 53/udp -> Used for DNS queries

To properly use the deployment in the TRAIN concept, a NS record must point to a publicly accessible domain/ip address where port 53 will handle dns queries. In our deployment we assume NGINX as an ingress controller, which has clunky support for raw tcp/udp ports. We only define the ingress for the 16001 port to make the api accessible via hostname. 

The DNS ports are available through a statically defined IP address, which will be one of the available clusterIPs of the kubernetes cluster. This IP is configurable as part of the values.yaml file, and is by default set to: 10.96.0.11

You **MUST** ensure that the NS record points to the configured ip address.

## UI Deployment:

### API Key secret:
To allow the ui to communicate with the zonemanager it requires an api key generated by the zonemanager itself. since this is dynamic, and also should not be part of the helm charts, you must create the secret yourself!

Ensure that the secret contains:

`API_KEY=<secret>`

and modify the values.yaml application.properties.secret.name to match the name you gave to the secret.
